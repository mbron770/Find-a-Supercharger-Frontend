{"ast":null,"code":"var _jsxFileName = \"/Users/tabo/Development/code/phase-2/phase-2-Project/Find-a-Supercharger-Frontend/src/components/map.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { GoogleMap, Marker, InfoWindow } from \"@react-google-maps/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst URL = 'http://localhost:3000/fuel_stations';\nconst API_KEY = 'AIzaSyDn7oQa4QsdEXc9GoIv5as8gMS8_uF73_4';\nfunction Map() {\n  _s();\n  const containerStyle = {\n    width: \"100%\",\n    height: \"650px\"\n  };\n  const [stations, setStations] = useState([]);\n  const [currentLocation, setCurrentLocation] = useState(null);\n  const [selectedStation, setSelectedStation] = useState(null);\n  const [distance, setDistance] = useState(null);\n  const [duration, setDuration] = useState(null);\n  const infoWindowRef = useRef(null); // Ref to store the InfoWindow instance\n\n  useEffect(() => {\n    fetch(URL).then(response => response.json()).then(data => setStations(data));\n  }, []);\n  useEffect(() => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(position => {\n        const {\n          latitude,\n          longitude\n        } = position.coords;\n        setCurrentLocation({\n          lat: latitude,\n          lng: longitude\n        });\n      }, error => {\n        console.error(\"Error getting current location:\", error);\n      });\n    } else {\n      console.error(\"Geolocation is not supported by this browser.\");\n    }\n  }, []);\n  useEffect(() => {\n    if (selectedStation && currentLocation) {\n      const directionsService = new window.google.maps.DirectionsService();\n      const request = {\n        origin: currentLocation,\n        destination: {\n          lat: selectedStation.latitude,\n          lng: selectedStation.longitude\n        },\n        travelMode: \"DRIVING\",\n        drivingOptions: {\n          departureTime: new Date()\n        }\n      };\n      directionsService.route(request, handleDirectionsResponse);\n    }\n  }, [selectedStation, currentLocation]);\n  function handleSelectedStation(station) {\n    setSelectedStation(station);\n  }\n  function handleCloseInfoWindow() {\n    setSelectedStation(null);\n  }\n  function handleDirectionsResponse(response, status) {\n    if (status === \"OK\") {\n      const leg = response.routes[0].legs[0];\n      setDistance(leg.distance.text);\n      setDuration(leg.duration.text);\n    } else {\n      console.error(\"Directions request failed:\", status);\n      setDistance(null);\n      setDuration(null);\n    }\n  }\n  function handleGetDirections() {\n    if (currentLocation && selectedStation) {\n      const origin = `${currentLocation.lat},${currentLocation.lng}`;\n      const destination = `${selectedStation.latitude},${selectedStation.longitude}`;\n      const directionsUrl = `https://www.google.com/maps/dir/?api=1&origin=${origin}&destination=${destination}`;\n      window.open(directionsUrl, \"_blank\");\n    }\n  }\n  function onInfoWindowLoad(infoWindow) {\n    if (infoWindowRef.current === null) {\n      infoWindowRef.current = infoWindow;\n    } else {\n      // Remove the unwanted element from the InfoWindow container\n      const container = infoWindowRef.current.getContentContainer();\n      const unwantedElement = container.querySelector(\".gm-style-iw-tc\");\n      if (unwantedElement) {\n        unwantedElement.remove();\n      }\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(GoogleMap, {\n    mapContainerStyle: containerStyle,\n    center: currentLocation,\n    zoom: 13,\n    children: [currentLocation && /*#__PURE__*/_jsxDEV(Marker, {\n      position: currentLocation,\n      title: \"Current Location\",\n      icon: {\n        url: \"https://maps.google.com/mapfiles/ms/icons/blue-dot.png\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }, this), stations.map(station => /*#__PURE__*/_jsxDEV(Marker, {\n      position: {\n        lat: station.latitude,\n        lng: station.longitude\n      },\n      title: station.station_name,\n      onClick: () => handleSelectedStation(station)\n    }, station.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }, this)), selectedStation && /*#__PURE__*/_jsxDEV(InfoWindow, {\n      onLoad: onInfoWindowLoad,\n      position: {\n        lat: selectedStation.latitude,\n        lng: selectedStation.longitude\n      },\n      onCloseClick: handleCloseInfoWindow,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"City: \", selectedStation.city]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Station Name: \", selectedStation.station_name.split(\" - Tesla Supercharger\")]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Address: \", selectedStation.street_address]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Phone: \", selectedStation.station_phone]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 13\n        }, this), distance && duration && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Distance: \", distance, \" | Duration: \", duration]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleGetDirections,\n          children: \"Get Directions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 5\n  }, this);\n}\n_s(Map, \"iVzejWieiWRzuMDSmGhBxkAzXJA=\");\n_c = Map;\nexport default Map;\nvar _c;\n$RefreshReg$(_c, \"Map\");","map":{"version":3,"names":["React","useState","useEffect","useRef","GoogleMap","Marker","InfoWindow","jsxDEV","_jsxDEV","URL","API_KEY","Map","_s","containerStyle","width","height","stations","setStations","currentLocation","setCurrentLocation","selectedStation","setSelectedStation","distance","setDistance","duration","setDuration","infoWindowRef","fetch","then","response","json","data","navigator","geolocation","getCurrentPosition","position","latitude","longitude","coords","lat","lng","error","console","directionsService","window","google","maps","DirectionsService","request","origin","destination","travelMode","drivingOptions","departureTime","Date","route","handleDirectionsResponse","handleSelectedStation","station","handleCloseInfoWindow","status","leg","routes","legs","text","handleGetDirections","directionsUrl","open","onInfoWindowLoad","infoWindow","current","container","getContentContainer","unwantedElement","querySelector","remove","mapContainerStyle","center","zoom","children","title","icon","url","fileName","_jsxFileName","lineNumber","columnNumber","map","station_name","onClick","id","onLoad","onCloseClick","city","split","street_address","station_phone","_c","$RefreshReg$"],"sources":["/Users/tabo/Development/code/phase-2/phase-2-Project/Find-a-Supercharger-Frontend/src/components/map.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { GoogleMap, Marker, InfoWindow } from \"@react-google-maps/api\";\n\nconst URL = 'http://localhost:3000/fuel_stations';\n\nconst API_KEY = 'AIzaSyDn7oQa4QsdEXc9GoIv5as8gMS8_uF73_4'; \n\nfunction Map() {\n  const containerStyle = {\n    width: \"100%\",\n    height: \"650px\",\n  };\n\n  const [stations, setStations] = useState([]);\n  const [currentLocation, setCurrentLocation] = useState(null);\n  const [selectedStation, setSelectedStation] = useState(null);\n  const [distance, setDistance] = useState(null);\n  const [duration, setDuration] = useState(null);\n  const infoWindowRef = useRef(null); // Ref to store the InfoWindow instance\n\n  useEffect(() => {\n    fetch(URL)\n      .then(response => response.json())\n      .then(data => setStations(data));\n  }, []);\n\n  useEffect(() => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          const { latitude, longitude } = position.coords;\n          setCurrentLocation({ lat: latitude, lng: longitude });\n        },\n        (error) => {\n          console.error(\"Error getting current location:\", error);\n        }\n      );\n    } else {\n      console.error(\"Geolocation is not supported by this browser.\");\n    }\n  }, []);\n\n  useEffect(() => {\n    if (selectedStation && currentLocation) {\n      const directionsService = new window.google.maps.DirectionsService();\n      const request = {\n        origin: currentLocation,\n        destination: {\n          lat: selectedStation.latitude,\n          lng: selectedStation.longitude,\n        },\n        travelMode: \"DRIVING\",\n        drivingOptions: {\n          departureTime: new Date(),\n        },\n      };\n      directionsService.route(request, handleDirectionsResponse);\n    }\n  }, [selectedStation, currentLocation]);\n\n  function handleSelectedStation(station) {\n    setSelectedStation(station);\n  }\n\n  function handleCloseInfoWindow() {\n    setSelectedStation(null);\n  }\n\n  function handleDirectionsResponse(response, status) {\n    if (status === \"OK\") {\n      const leg = response.routes[0].legs[0];\n      setDistance(leg.distance.text);\n      setDuration(leg.duration.text);\n    } else {\n      console.error(\"Directions request failed:\", status);\n      setDistance(null);\n      setDuration(null);\n    }\n  }\n\n  function handleGetDirections() {\n    if (currentLocation && selectedStation) {\n      const origin = `${currentLocation.lat},${currentLocation.lng}`;\n      const destination = `${selectedStation.latitude},${selectedStation.longitude}`;\n      const directionsUrl = `https://www.google.com/maps/dir/?api=1&origin=${origin}&destination=${destination}`;\n      window.open(directionsUrl, \"_blank\");\n    }\n  }\n\n  function onInfoWindowLoad(infoWindow) {\n    if (infoWindowRef.current === null) {\n      infoWindowRef.current = infoWindow;\n    } else {\n      // Remove the unwanted element from the InfoWindow container\n      const container = infoWindowRef.current.getContentContainer();\n      const unwantedElement = container.querySelector(\".gm-style-iw-tc\");\n      if (unwantedElement) {\n        unwantedElement.remove();\n      }\n    }\n  }\n\n  return (\n    <GoogleMap\n      mapContainerStyle={containerStyle}\n      center={currentLocation}\n      zoom={13}\n    >\n      {currentLocation && (\n        <Marker\n          position={currentLocation}\n          title=\"Current Location\"\n          icon={{\n            url: \"https://maps.google.com/mapfiles/ms/icons/blue-dot.png\",\n          }}\n        />\n      )}\n      {stations.map(station => (\n        <Marker\n          key={station.id}\n          position={{ lat: station.latitude, lng: station.longitude }}\n          title={station.station_name}\n          onClick={() => handleSelectedStation(station)}\n        />\n      ))}\n      {selectedStation && (\n        <InfoWindow\n          onLoad={onInfoWindowLoad}\n          position={{\n            lat: selectedStation.latitude,\n            lng: selectedStation.longitude,\n          }}\n          onCloseClick={handleCloseInfoWindow}\n        >\n          <div>\n            <h3>City: {selectedStation.city}</h3>\n            <p>Station Name: {selectedStation.station_name.split(\" - Tesla Supercharger\")}</p>\n            <p>Address: {selectedStation.street_address}</p>\n            <p>Phone: {selectedStation.station_phone}</p>\n            {distance && duration && (\n              <p>\n                Distance: {distance} | Duration: {duration}\n              </p>\n            )}\n            <button onClick={handleGetDirections}>Get Directions</button>\n          </div>\n        </InfoWindow>\n      )}\n    </GoogleMap>\n  );\n}\n\nexport default Map;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}